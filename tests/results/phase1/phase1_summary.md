# NijiLingo API トーン差検証 - Phase 1 最終レポート

> 実施日: 2026-02-01
> テスト者: ベン
> 対象API: llama-4-scout, gpt-oss-120b

---

## 📊 Phase 1 結果サマリー

| API | Round1 | Round2 | Round3 | Round4 | Round5 | 改善幅 |
|-----|--------|--------|--------|--------|--------|--------|
| llama-4-scout | 10/30 (33%) | 25/30 (83%) | 29/30 (97%) | 29/30 (97%) | 29/30 (97%) | **+64pt** |
| gpt-oss-120b | 25/30 (83%) | 24/30 (80%) | 26/30 (87%) | 27/30 (90%) | 27/30 (90%) | **+7pt** |

---

## 📈 トーン別スコア推移

### llama-4-scout

| トーン | R1 | R2 | R3 | R4 | R5 |
|--------|-----|-----|-----|-----|-----|
| casual | 2/10 | 6/10 | 10/10 ✅ | 10/10 ✅ | 10/10 ✅ |
| business | 5/10 | 10/10 ✅ | 9/10 | 9/10 | 9/10 |
| formal | 3/10 | 9/10 | 10/10 ✅ | 10/10 ✅ | 10/10 ✅ |

### gpt-oss-120b

| トーン | R1 | R2 | R3 | R4 | R5 |
|--------|-----|-----|-----|-----|-----|
| casual | 8/10 | 10/10 ✅ | 10/10 ✅ | 10/10 ✅ | 10/10 ✅ |
| business | 8/10 | 7/10 | 7/10 | 8/10 | 7/10 |
| formal | 9/10 | 7/10 | 9/10 | 9/10 | 10/10 ✅ |

---

## ① 各APIの得意・苦手（詳細）

### llama-4-scout

**得意なこと（改善後）:**
- casual: 10/10 ✅ Round 3以降完璧
- formal: 10/10 ✅ Round 3以降完璧
- 速度: 約1150ms（gpt-oss-120bの約1/3）

**苦手なこと:**
- business: 9/10（1つだけ失敗）
  - 「ちょっと聞きたいんだけど」で0%と50%が同じになりがち

**根本的な改善:**
- Round 1では「逆翻訳が全部同じ」問題が深刻だった
- Few-shot例示と語尾ガイド表で大幅改善

### gpt-oss-120b

**得意なこと:**
- casual: 10/10 ✅ Round 2以降完璧
- formal: 10/10 ✅ Round 5で完璧達成
- 翻訳精度: 高い

**苦手なこと:**
- business: 7/10（3つ失敗）
  - 「ちょっと聞きたいんだけど」
  - 「そうなんだ」
  - 「お願いできる？」or「まあ、いいか」
  - 0%と50%の差が出にくい

**速度:**
- 約2969ms（llama-4-scoutの約3倍）

---

## ② 改善が認められたプロンプト

### 改善1: Few-shot例示の追加（効果: 大）

```
【必読：トーンレベル別の翻訳例】

■ 例「いいね」の翻訳:
| レベル | 英語 | 逆翻訳 |
|--------|------|--------|
| casual 0% | That's good. | いいですね。 |
| casual 50% | That's nice! | いいね〜 |
| casual 100% | Yo, that's sick! | めっちゃいいじゃん！ |
...
```

**効果:** llama-4-scout の casual が 2/10 → 10/10

### 改善2: 語尾ガイド表（効果: 大）

```
【語尾の差分ガイド】
┌─────────┬─────────────────┬─────────────────┬─────────────────┐
│ トーン  │ 0%              │ 50%             │ 100%            │
├─────────┼─────────────────┼─────────────────┼─────────────────┤
│ casual  │ 〜です/〜ます   │ 〜だね/〜かな   │ 〜じゃん/〜っしょ │
│ business│ 〜です/〜ます   │ 〜いただけますか│ 〜いただけますでしょうか │
│ formal  │ 〜です/〜ます   │ 〜でございます  │ 〜申し上げます   │
└─────────┴─────────────────┴─────────────────┴─────────────────┘
```

**効果:** 逆翻訳のトーン差が明確に出るようになった

### 改善3: トーン別必須要素の明確化（効果: 中）

```
【トーンレベル: 100% - 超カジュアル】
■ 英語【必須要素】:
- gonna, wanna, gotta, ya を使う
- "Yo," "Hey," で始める

■ 逆翻訳の語尾【必須】:
- 「〜じゃん！」「〜っしょ！」「〜だよね！」
```

**効果:** 100%レベルの表現が確実に強くなった

---

## ③ 改善しなかったプロンプト

### businessトーンの0%/50%問題

**試したこと:**
- 「0%とは必ず異なる表現にする」の強調
- 具体的な語尾例の追加

**結果:** gpt-oss-120bでは改善せず（7/10のまま）

**原因の推測:**
- 「ちょっと聞きたいんだけど」「そうなんだ」のような短い文では、ビジネス表現の0%と50%の差が出にくい
- 英語の "I would like to ask" と "Could I ask" が同じ逆翻訳になる

---

## ④ 最終版プロンプト（v4）

### システムプロンプト構成

```
1. 不変条件（INVARIANT_RULES）
2. トーン・評価語ルール
3. Few-shot例示（語尾の差が明確な例）
4. トーン指示（レベル別の必須要素）
5. 逆翻訳ルール（語尾ガイド表）
6. JSON出力形式
```

### 主要な改善点

| 項目 | Round 1 | Round 5 |
|------|---------|---------|
| Few-shot例示 | なし | 3パターン |
| 語尾ガイド表 | なし | あり |
| トーン必須要素 | 曖昧 | 具体的 |
| 逆翻訳ルール | 曖昧 | 語尾を明示 |

---

## ⑤ 各ラウンドの詳細

### Round 1（現在のアプリプロンプト）
- llama-4-scout: 10/30（逆翻訳が同じ問題が深刻）
- gpt-oss-120b: 25/30（0%/50%が同じ問題）

### Round 2（v3: Few-shot + 語尾ルール具体化）
- llama-4-scout: 25/30（+15）大幅改善！
- gpt-oss-120b: 24/30（-1）微減

### Round 3（v4: 語尾ガイド表 + 差分強調）
- llama-4-scout: 29/30（+4）ほぼ完璧！
- gpt-oss-120b: 26/30（+2）改善

### Round 4（v4継続）
- llama-4-scout: 29/30（維持）
- gpt-oss-120b: 27/30（+1）改善

### Round 5（v4継続）
- llama-4-scout: 29/30（維持）
- gpt-oss-120b: 27/30（維持）

---

## ⑥ 結論と推奨事項

### 100%達成: No（最高97%）

### 推奨API

| 用途 | 推奨API | 理由 |
|------|---------|------|
| 速度重視 | llama-4-scout | 97%精度 + 高速（1150ms） |
| 精度重視 | gpt-oss-120b | 90%精度 + 翻訳品質高い |
| ハイブリッド | casual/formal → llama, business → gpt | 両方の強みを活かす |

### 今後の改善点

1. **businessトーンの0%/50%問題**
   - より明確な差分指示が必要
   - シュワちゃんにアドバイスを求める

2. **短い文での検証**
   - 「そうなんだ」「まあ、いいか」のような短文は難しい
   - テスト文の選定を見直す

3. **100%達成への道筋**
   - Phase 2でシュワちゃんのアドバイスを反映
   - businessトーン特化の改善を実施

---

## 📁 関連ファイル

- 検証条件: `tests/verification_conditions.md`
- テスト文: `tests/tone_test_cases_v2.md`
- 現在のアプリプロンプト: `tests/current_app_prompt.md`
- シュワちゃん改善案: `tests/improved_prompt_v2.md`
- スクリプト: `scripts/tone-test-v4.js`

---

*作成: ベン*
*日時: 2026-02-01 00:10 JST*
