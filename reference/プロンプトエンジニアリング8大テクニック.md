# 🎯 プロンプトエンジニアリング 8大テクニック

> OpenAI/Anthropicエンジニアが使っている主要技術
> プロンプト作成時は必ずこの観点でチェックすること！

---

## 優先度まとめ

| 優先度 | テクニック |
|--------|-----------|
| 🔴 高 | CoT, Few-Shot, Prompt Chaining, Structured Output |
| 🟡 中 | Role, ToT, Reflection |
| 🟢 低 | Meta-Prompting |

---

## 1. Chain-of-Thought (CoT) - 段階的思考 🔴高

**概要**: 複雑な問題を段階的に考えさせる

```
❌ 悪い例:
「15% of 340は？」

✅ 良い例:
「Calculate 15% of 340. Show your work step-by-step, then give the final answer.」
```

**効果**: 複雑な問題の精度が劇的に向上

**NijiLingoでの使い方**:
```
Step 1: NER（名詞識別）
Step 2: ゼロ照応解決（主語補完）
Step 3: Modality識別
Step 4: 翻訳実行
```

---

## 2. Few-Shot Prompting - 例示学習 🔴高

**概要**: 具体例を見せて学ばせる

```
Here are two examples of well-structured reports:

EXAMPLE 1: [具体的な例1]
EXAMPLE 2: [具体的な例2]

Using exactly this format, create a report for: [新しいタスク]
```

**効果**: 出力形式の一貫性が向上

**NijiLingoでの使い方**:
```
例1: 「おうたが寝てから向かいます」
→ NER: おうた=Person
→ 翻訳: "I'll head over after Outa goes to sleep."

例2: 「資料を送ってもらえる？」
→ Modality: request
→ 翻訳: "Can you send me the materials?"
```

---

## 3. Role/Persona Prompting - 役割付与 🟡中

**概要**: 専門家の役割を与える

```
❌ 悪い例:
「このコードをレビューして」

✅ 良い例:
「You are a senior Python developer with 10+ years of experience. 
Review this code for:
1. Security vulnerabilities
2. Performance issues
3. Best practices violations」
```

**効果**: 専門的な視点で回答が得られる

**NijiLingoでの使い方**:
```
「あなたは日本語から英語への翻訳の専門家です。
以下の観点で翻訳してください：
1. 名詞の正確な識別
2. 省略された主語の補完
3. 発話意図（Modality）の保持」
```

---

## 4. Tree-of-Thought (ToT) - 複数推論パス 🟡中

**概要**: 複数のアプローチを生成・評価・選択

```
Generate three different approaches to solve this problem.
Evaluate each approach's pros and cons.
Then select the best one and explain why.
```

**効果**: 複雑な問題で74%の成功率（従来の33%から大幅向上）

**NijiLingoでの使い方**:
```
「この文を3通りの方法で翻訳してください：
A: 直訳寄り
B: 意訳寄り
C: ネイティブ表現

それぞれの長所・短所を評価し、最適なものを選んでください。」
```

---

## 5. Prompt Chaining - プロンプト連鎖 🔴高

**概要**: 複雑なタスクを複数ステップに分解

```
Step 1: Generate a research summary on [topic]
Step 2: List five key statistics from the summary
Step 3: Create a slide outline based on the findings
```

**効果**: 複雑なタスクを分解して精度向上

**NijiLingoでの使い方**:
```
1回目のAPI呼び出し: テキスト分析（NER + ゼロ照応 + Modality）
2回目のAPI呼び出し: 分析結果を使って翻訳
3回目のAPI呼び出し: 翻訳結果の品質チェック
```

⚠️ 注意: API呼び出し回数が増えるのでコスト・速度とのトレードオフ

---

## 6. Meta-Prompting - メタプロンプト 🟢低

**概要**: プロンプト自体をAIに最適化させる

```
I want to create a prompt that generates high-quality blog posts.
The prompt should:
- Ask for engaging headlines
- Include SEO keywords
- Request a compelling introduction

Generate this prompt for me.
```

**効果**: プロンプト自体を最適化

**NijiLingoでの使い方**:
```
「NijiLingoの翻訳プロンプトを改善してください。
現在の問題:
- modality_classが保持されない
- 人名が誤認識される

これらを解決するプロンプトを生成してください。」
```

---

## 7. Reflection Prompting - 自己評価 🟡中

**概要**: AIに自分の回答を評価・修正させる

```
[AIの回答]

Now review your answer for:
- Factual errors
- Logical inconsistencies
- Areas for improvement

Provide a corrected version.
```

**効果**: 誤りを自己修正して品質向上

**NijiLingoでの使い方**:
```
「翻訳結果を自己レビューしてください：
1. modalityは保持されていますか？
2. 人名は正しく認識されましたか？
3. 主語は適切に補完されましたか？

問題があれば修正版を出力してください。」
```

---

## 8. Structured Output - 構造化出力 🔴高

**概要**: 出力形式を明確に指定

```
❌ 悪い例:
「デジタルマーケティングについて教えて」

✅ 良い例:
「Explain three digital marketing strategies for small businesses:
1. [Strategy name]: [1-2 sentence description]
2. [Strategy name]: [1-2 sentence description]
3. [Strategy name]: [1-2 sentence description]

Include cost estimates and expected ROI for each.」
```

**効果**: 読みやすく、使いやすい出力

**NijiLingoでの使い方**:
```json
{
  "translation": "英語翻訳",
  "reverse_translation": "日本語逆翻訳",
  "risk": "low|med|high",
  "analysis": {
    "ner": [{"text": "名詞", "type": "Person"}],
    "subject": "I",
    "modality": "request"
  }
}
```

---

## 📋 プロンプト作成チェックリスト

新しいプロンプトを作る時、以下を確認：

- [ ] **CoT**: 段階的に考えさせてる？
- [ ] **Few-Shot**: 具体例を入れてる？
- [ ] **Role**: 専門家の役割を与えてる？
- [ ] **Structured Output**: 出力形式を指定してる？
- [ ] **Reflection**: 自己チェックを入れるべき？
- [ ] **ToT**: 複数案を比較すべき？
- [ ] **Prompt Chaining**: タスクを分割すべき？

⚠️ **全部入れると長くなりすぎる！**
- 必要なものだけ選ぶ
- 迷ったらベニーに相談

---

## 🔗 参考

- OpenAI Prompt Engineering Guide
- Anthropic Claude Documentation
- きみちゃん設計ガイドv2

---

*Last Updated: 2026-01-29*
*Created by: きみちゃん + ベン ⚡*
