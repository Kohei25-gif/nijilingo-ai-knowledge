# 🧪 NijiLingo プロンプトv2 検証プロンプト

> BUGPAK-VERIFY v1.7形式

---

## 検証対象

**ファイル:** `improved_prompt_v2.md`

**適用テクニック:**
- CoT（段階的思考）
- Few-Shot（3例）
- Role（専門家の役割）
- Structured Output（JSON形式）

---

## 検証タスク

以下のプロンプトをClaude Codeまたは対象LLMに投げて、出力を確認してください。

---

### 🧪 テスト1: 人名識別（NER）

**プロンプト:**
```
あなたは日本語⇔英語翻訳の専門家です。

【翻訳プロセス】
■ Step 1: 名詞識別（NER）
- Person（人名）: 後ろに人の動作が続く

■ Step 2: 主語補完
- 丁寧語（〜ます）→ I

■ Step 3: Modality識別
- statement（断定）

【例】
入力: 「おうたが寝てから向かいます」
出力:
{
  "translation": "I'll head over after Outa goes to sleep.",
  "reverse_translation": "おうたが寝てから向かいます。",
  "risk": "low"
}

【タスク】
以下を翻訳してください：
「おうたが寝てから向かいます」

JSON形式で出力：
```

**期待される出力:**
```json
{
  "translation": "I'll head over after Outa goes to sleep.",
  "reverse_translation": "おうたが寝てから向かいます。",
  "risk": "low"
}
```

**確認ポイント:**
- [ ] 「おうた」がPerson（人名）として認識されている
- [ ] "singing sleeps"などの誤訳になっていない
- [ ] "Outa"または"Ota"とローマ字表記されている

---

### 🧪 テスト2: Modality保持（最重要）

**プロンプト:**
```
あなたは日本語⇔英語翻訳の専門家です。

【最重要ルール】
Modalityは絶対に変更禁止！
- request（依頼）: 〜てもらえる？ → Can you...?
- confirmation（確認）: 〜してる？ → Are you...?

依頼 → 確認 に変えてはいけない！

【例】
入力: 「明日の会議の資料を送ってもらえる？」（依頼）
出力:
{
  "translation": "Can you send me the materials for tomorrow's meeting?",
  "reverse_translation": "明日の会議の資料を送ってもらえる？",
  "risk": "low"
}

【タスク】
以下を翻訳してください：
「明日の会議の資料を送ってもらえる？」

JSON形式で出力：
```

**期待される出力:**
```json
{
  "translation": "Can you send me the materials for tomorrow's meeting?",
  "reverse_translation": "明日の会議の資料を送ってもらえる？",
  "risk": "low"
}
```

**確認ポイント:**
- [ ] "Can you" / "Could you" / "Would you" のいずれかで始まる（依頼）
- [ ] "Are you" / "Is it" で始まっていない（確認への変化はNG）
- [ ] Modality = request が保持されている

---

### 🧪 テスト3: Casual Lv3 での Modality保持

**プロンプト:**
```
You are NijiLingo in PARTIAL mode.

【Pre-Edit Checklist】
□ Original modality: request（「〜てもらえる？」）
□ Must preserve: request

【Hard Invariant】
modality_class - NEVER change request ↔ confirmation

【Task】
Edit for Casual tone, Level 100%:

current_translation: "Can you send me the materials for tomorrow's meeting?"

Output JSON:
```

**期待される出力:**
```json
{
  "new_translation": "Hey, can you shoot me those meeting docs for tomorrow?",
  "reverse_translation": "ねえ、明日の会議の資料送ってくんない？",
  "risk": "low"
}
```

**確認ポイント:**
- [ ] "Can you" / "Could you" が維持されている
- [ ] "Are you sending" になっていない
- [ ] カジュアルな口調に変わっているが、依頼のまま

---

### 🧪 テスト4: 敬語レベル段階確認

**プロンプト:**
```
あなたは日本語⇔英語翻訳の専門家です。

【タスク】
以下の文を4段階の丁寧さで翻訳してください：
「その服素敵だね」

Lv0 (0%): 元のまま
Lv1 (25%): 少し丁寧
Lv2 (50%): 普通に丁寧
Lv3 (100%): 最大限丁寧

各レベルをJSON形式で出力：
```

**期待される出力:**
```
Lv0: "That outfit looks nice." / その服素敵だね
Lv1: "That outfit looks nice." / その服素敵ですね
Lv2: "That outfit looks lovely." / そのお召し物素敵ですね
Lv3: "That outfit looks absolutely wonderful." / そのお召し物大変素敵でございます
```

**確認ポイント:**
- [ ] Lv0 < Lv1 < Lv2 < Lv3 と段階的に丁寧になっている
- [ ] Lv2がLv1より弱くなっていない
- [ ] 日本語も英語も両方変化している

---

## 📋 検証結果テンプレート

```markdown
# 検証結果 - プロンプトv2

日時: YYYY-MM-DD HH:MM
検証者: 

## テスト1: 人名識別
- 結果: ✅ PASS / ❌ FAIL
- 出力: 
- 備考: 

## テスト2: Modality保持
- 結果: ✅ PASS / ❌ FAIL
- 出力:
- 備考:

## テスト3: Casual Lv3 Modality
- 結果: ✅ PASS / ❌ FAIL
- 出力:
- 備考:

## テスト4: 敬語レベル
- 結果: ✅ PASS / ❌ FAIL
- 出力:
- 備考:

## 総合評価
- PASS: X/4
- 問題点:
- 改善案:
```

---

*Created: 2026-01-29*
*Based on: BUGPAK-VERIFY v1.7*
